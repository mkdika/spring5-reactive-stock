<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="UTF-8">
        <title>Stock Details</title>
        <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css" integrity="sha384-BVYiiSIFeK1dGmJRAkycuHAHRg32OmUcww7on3RYdg4Va+PmSTsz/K68vbdEjh4u" crossorigin="anonymous">
        <link rel="stylesheet" href="css/custom.css">        
    </head>

    <body>
        <div id="app">
            <div class="pager col-lg-12 col-md-12 col-sm-12 col-xs-12">
                <div class="btn-group btn-group">
                    <button id="btnFb" @click.prevent="getFacebook" class="btn btn-primary"  style="width: 200px;" :disabled="disabledFb">Get Latest Facebook Price</button>                
                </div>
                <div class="btn-group btn-group">
                    <button id="btnMs" @click.prevent="getMicrosoft" class="btn btn-danger" style="width: 200px;" :disabled="disabledMs">Get Latest Microsoft Price</button>
                </div>
                <div class="btn-group btn-group">
                    <button id="btnGo" @click.prevent="getGoogle" class="btn btn-success" style="width: 200px;" :disabled="disabledGo">Get Latest Google Price</button>
                </div>
                <div class="btn-group btn-group">
                    <button id="btnAp" @click.prevent="getApple" class="btn btn-default" style="width: 200px;" :disabled="disabledAp">Get Latest Apple Price</button>
                </div>
            </div>

            <div class="col-lg-6 col-md-6 col-sm-12 col-xs-12">
                <div class="panel panel-default ">
                    <div class="panel-body">                    
                        <vue-chart type="line" :data="dataFB" :options="fbOption"></vue-chart>
                        
<!--                        <line-chart :data="dataFB" :min="160" :max="190" width="95%"
                            :library="{title:'Facebook',explorer: {axis: 'horizontal',keepInBounds: false},bar: {groupWidth: 5},chartArea:{width:'90%',height:'85%'}}">

                        </line-chart>-->
                </div>
            </div> 
        </div>

        <div class="col-lg-6 col-md-6 col-sm-12 col-xs-12">
            <div class="panel panel-default">
                <div class="panel-body">
                    <vue-chart type="line" :data="dataMSFT" :options="msOption"></vue-chart>
                    
<!--                    <line-chart :data="dataMSFT" :min="70" :max="100" width="95%"
                        :library="{title:'Microsoft',explorer: {axis: 'horizontal',keepInBounds: false},bar: {groupWidth: 5},chartArea:{width:'90%',height:'85%'}}">
                </line-chart>-->
            </div>
        </div>
    </div>
            
            <div class="col-lg-6 col-md-6 col-sm-12 col-xs-12">
                <div class="panel panel-default ">
                    <div class="panel-body">   
                        <vue-chart type="line" :data="dataGOOGL" :options="goOption"></vue-chart>
                        
<!--                        <line-chart :data="dataGOOGL" :min="930" :max="960" width="95%"
                            :library="{title:'Google',explorer: {axis: 'horizontal',keepInBounds: false},bar: {groupWidth: 5},chartArea:{width:'90%',height:'85%'}}">
                    </line-chart>-->
                </div>
            </div> 
        </div>
            
            <div class="col-lg-6 col-md-6 col-sm-12 col-xs-12">
                <div class="panel panel-default ">
                    <div class="panel-body">                    
                        <vue-chart type="line" :data="dataAAPL" :options="apOption"></vue-chart>
                        
<!--                        <line-chart :data="dataAAPL" :min="150" :max="180" width="95%"
                            :library="{title:'Apple',explorer: {axis: 'horizontal',keepInBounds: false},bar: {groupWidth: 5},chartArea:{width:'90%',height:'85%'}}">
                            </line-chart>-->
                </div>
            </div> 
        </div>
</div>

<script
    src="http://code.jquery.com/jquery-2.2.4.min.js"
    integrity="sha256-BbhdlvQf/xTY9gja0Dq3HiwQF8LaCRTXxZKRutelT44="
crossorigin="anonymous"></script>
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha384-Tc5IQib027qvyjSMfHjOMaLkfuWVxZxUPnCJA7l2mCWNIpG9mGCD8wGNIcPD7Txa" crossorigin="anonymous"></script>
<script src="https://unpkg.com/vue@2.4.2"></script>
<script src="https://unpkg.com/vue-chart-js@1.3.0"></script>
<script src="js/custom.js"></script>
<script>
    Vue.use(VueChart.default)
    var app = new Vue({
        el: "#app",        
        data: {
            disabledFb: false,
            disabledMs: false,
            disabledGo: false,
            disabledAp: false,            
            fbOption: {
                scaleShowVerticalLines: false,
                title: {
                    display: true,
                    text: 'Facebook'
                },
                legend: {
                    display: false                    
                },
                scales: {                   
                    yAxes: [{
                        display: true,
                        ticks: {
                            beginAtZero: false,
                            steps: 5,
                            stepValue: 5,
                            min: 160,
                            max: 190                                
                        }
                    }],
                    xAxes : [{
                        gridLines : {
                            display : false
                        },
                        ticks: {
                            autoSkip:true,
                            maxTicksLimit:3
                        }
                    }]
                },
            },
            msOption: {
                scaleShowVerticalLines: false,
                title: {
                    display: true,
                    text: 'Microsoft'
                },
                legend: {
                    display: false                    
                },
                scales: {                   
                    yAxes: [{
                        display: true,
                        ticks: {
                            beginAtZero: false,
                            steps: 5,
                            stepValue: 5,
                            min: 70,
                            max: 100                                
                        }
                    }], xAxes : [{
                        gridLines : {
                            display : false
                        },
                        ticks: {
                            autoSkip:true,
                            maxTicksLimit:3
                        }
                    }]
                },
            },
            goOption: {
                scaleShowVerticalLines: false,
                title: {
                    display: true,
                    text: 'Google'
                },
                legend: {
                    display: false                    
                },
                scales: {                   
                    yAxes: [{
                        display: true,
                        ticks: {
                            beginAtZero: false,
                            steps: 5,
                            stepValue: 5,
                            min: 930,
                            max: 960                                
                        }
                    }],
                    xAxes : [{
                        gridLines : {
                            display : false
                        },
                        ticks: {
                            autoSkip:true,
                            maxTicksLimit:3
                        }
                    }]
                },
            },
            apOption: {
                scaleShowVerticalLines: false,
                title: {
                    display: true,
                    text: 'Apple'
                },
                legend: {
                    display: false                    
                },
                scales: {                   
                    yAxes: [{
                        display: true,
                        ticks: {
                            beginAtZero: false,
                            steps: 5,
                            stepValue: 5,
                            min: 150,
                            max: 180                                
                        }
                    }],
                    xAxes : [{
                        gridLines : {
                            display : false
                        },
                        ticks: {
                            autoSkip:true,
                            maxTicksLimit:3
                        }
                    }]
                },
            },
            dataFB: {                
                labels: [],
                datasets: [{           
                    data: [],
                    backgroundColor: 'rgba(59,89,152,0.4)'
                }]
            },
            dataMSFT:  {                
                labels: [],
                datasets: [{           
                    data: [],
                    backgroundColor: 'rgba(217,83,79,0.4)'
                }]
            },
            dataGOOGL:  {                
                labels: [],
                datasets: [{           
                    data: [],
                    backgroundColor: 'rgba(153,255,51,0.4)'
                }]
            },
            dataAAPL:  {                
                labels: [],
                datasets: [{           
                    data: [],
                    backgroundColor: 'rgba(200,200,200,0.4)'
                }]
            }
        },methods: {
            getFacebook: function () {
                var vue = this;
                vue.disabledFb = true;
                var stringEventSource = new EventSource('/api/stockprice/FB');
                stringEventSource.onmessage = function (e) {
                    var array = e.data.split(",")
                    vue.dataFB.labels.push(array[0])
                    vue.dataFB.datasets[0].data.push(parseInt(array[1]))
                }
            },
            getMicrosoft: function () {
                var vue = this;
                vue.disabledMs = true;
                var stringEventSource = new EventSource('/api/stockprice/MSFT');
                stringEventSource.onmessage = function (e) {
                    var array = e.data.split(",")
                    vue.dataMSFT.labels.push(array[0])
                    vue.dataMSFT.datasets[0].data.push(parseInt(array[1]))
                }
            },
            getGoogle: function () {
                var vue = this;
                vue.disabledGo = true;
                var stringEventSource = new EventSource('/api/stockprice/GOOGL');
                stringEventSource.onmessage = function (e) {
                    var array = e.data.split(",")
                    vue.dataGOOGL.labels.push(array[0])
                    vue.dataGOOGL.datasets[0].data.push(parseInt(array[1]))
                }
            },
            getApple: function () {
                var vue = this;
                vue.disabledAp = true;
                var stringEventSource = new EventSource('/api/stockprice/AAPL');
                stringEventSource.onmessage = function (e) {
                    var array = e.data.split(",")
                    vue.dataAAPL.labels.push(array[0])
                    vue.dataAAPL.datasets[0].data.push(parseInt(array[1]))
                }
            }
        }
    })
</script>
</body>
</html>